# Cloud Storage Codelab


## Table of Contents

 * [Introduction](#introduction)
 * [Installation](#installation)
 * [Configuration ](#configuration )
 * [Supported Environments](#supported-environments)
 * [Sample Code](# Sample Code)
 * [License](#license)
 
 
## Introduction
    Cloud Storage is a service that offers to store high volumes of data such as images, audios, and videos generated by your users securely and economically with direct device access. 
In addition to ensuring data availability, reliability, consistency, and security.In this codelab you can gain insight about how to use AGC Auth for login and AGC Cloud Storage service for upload, list, download, delete and metadata operations
with the MVVM design pattern in Kotlin programming language.

## Installation
    Before using Cloud Storage Codelab code, check whether the Android Studio environment has been installed. 
    Download the Cloud Storage Codelab project by zip or clone in Github.
    Wait for the gradle build in your project.
    
## Supported Environments
	•	Android 4.2 and later
	•	Java JDK 1.8 or later version
	•	Android API Level 19 or higher version
	

## Configuration 
    HMS Cloud Storage Codelab code uses the Client structure in the project.The following describes methods in the Client structure.
    
    1. Register and sign in to HUAWEI Developers.
    2. Create a project and then create an app in the project, enter the project package name.
    3. Please check if the Cloud Storage service is still in Beta state. If yes, before using this service you need to apply to enable the service. After receiving your application, Huawei operations personnel will reply to you within 1 to 3 working days. Application link: https://developer.huawei.com/consumer/en/doc/development/AppGallery-connect-Guides/agc-cloudstorage-apply
    4. After permission is obtained, Go to Project Settings > Manage APIs, find the Cloud Storage Service API, and enable it.
    5. Go to Project Settings > General information, click Set next to Data storage location under Project information, and select a data storage location in the displayed dialog box.
    6. Enable the one of the account authentication mode of Auth Service in AppGallery Connect. Otherwise, the sign-in fails.
    7. Download the agconnect-services.json file and place it to the app's root directory of the project. Go to My projects > Build > Auth service . If it is the first time that you use Auth Service, click Enable now in the upper right corner.
    8. Click the Authentication mode tab and click Enable in the Operation column for one of the authentication mode.
    9. Add the Maven repository address maven {url 'https://developer.huawei.com/repo/'} and plug-in class path 'com.huawei.agconnect:agcp:1.4.1.300' to the project-level build.gradle file.
    10. Add apply plugin: 'com.huawei.agconnect' to the last line of the app-level build.gradle file.
    11. Configure the dependency com.huawei.agconnect:agconnect-storage:1.3.0.300 in the app-level buildle.gradle file.
    12. Synchronize the project.
    
	
## Sample Code
    Cloud Storage Codelab code uses the Client structure in the project.The following describes methods in the Client structure.

    1). Initiliaze AGCStorageManagement instance.
    You can obtain the initialized AGCStorageManagement instance using the initStorage method in the CloudStorageHelper.
    Code location src/main/java/com.codelab.cloudstorage/dao/CloudStorageHelper.kt
    
    2). Initiate Auth service to user login. Without login, system will not allow the user for any operation on storage.
    You can obtain the initialized Auth service instance using the login method in the LoginFragment.
    Code location  src/main/java/com.codelab.cloudstorage/view/LoginFragment.kt
    
    3). List all files
    Create storage reference whether under your specific folder (i.e. ‘images/’) or without specifying folder name (default: ‘/’) and apply the listAll method of this reference to get all files from storage.
    Code location src/main/java/ccom.codelab.cloudstorage/dao/CloudStorageHelper.kt
    
    4). Upload file
    Create storage reference under specified folder and apply to putFile method of this reference with the exact path of chosen file.
    Code location src/main/java/ccom.codelab.cloudstorage/dao/CloudStorageHelper.kt
    
    5). Download file
    Create storage reference with the file name of selected item to be downloaded. Specify the file path that to be downloaded in mobile phone.
    Code location src/main/java/ccom.codelab.cloudstorage/dao/CloudStorageHelper.kt
    
    6). Get meta data
    Create the storage reference under specified folder and provide the file name which you want to get metadata. In the following code block, it is possible to get the data size.
    Code location src/main/java/ccom.codelab.cloudstorage/dao/CloudStorageHelper.kt


##  License
    Cloud Storage Codelab is licensed under the [Apache License, version 2.0](http://www.apache.org/licenses/LICENSE-2.0).
